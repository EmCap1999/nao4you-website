<section class="py-3 py-md-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5 col-xxl-4">
        <div class="card border border-light-subtle rounded-3 shadow-sm">
          <div class="card-body p-3 p-md-4 p-xl-5">
            <div class="text-center mb-3">
              <a href="https://www.facebook.com/profile.php?id=100086769682698">
                <img ngSrc="assets/images/nao4you_logo.jpg" alt="Nao4You" width="175" height="175" priority />
              </a>
            </div>
            <h2 class="fs-6 fw-normal text-center text-secondary mb-4">
              Entrez vos coordonnées pour vous inscrire
            </h2>

            <!-- While user is not registered -->
            <div *ngIf="!isSuccessful">
              <form [formGroup]="form" #f="ngForm" (ngSubmit)="f.form.valid && onSubmit()" novalidate>
                <div class="row gy-2 overflow-hidden">

                  <!-- First Name -->
                  <div class="col-12">
                    <div class="form-floating mb-3">
                      <input type="text" 
                             class="form-control" 
                             formControlName="firstName" 
                             name="firstName" 
                             id="firstName"
                             [ngClass]="{'is-invalid': f.submitted && form.get('firstName')?.invalid}" />
                      <label for="firstName" class="form-label">Prénom</label>
                      <!-- handling errors -->
                      <div *ngIf="form.get('firstName')?.errors && f.submitted" class="invalid-feedback">
                        <div *ngIf="form.get('firstName')?.errors?.['required']">
                          Veuillez compléter le champ.
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Last Name -->
                  <div class="col-12">
                    <div class="form-floating mb-3">
                      <input type="text" 
                             class="form-control" 
                             formControlName="lastName" 
                             name="lastName" 
                             id="lastName"
                             [ngClass]="{'is-invalid': f.submitted && form.get('lastName')?.invalid}"/>
                      <label for="lastName" class="form-label">Nom</label>
                     <!-- handling errors -->
                     <div *ngIf="form.get('lastName')?.errors && f.submitted" class="invalid-feedback">
                      <div *ngIf="form.get('lastName')?.errors?.['required']">
                        Veuillez compléter le champ.
                      </div>
                    </div>
                  </div>
                </div>

                  <!-- Email Address -->
                  <div class="col-12">
                    <div class="form-floating mb-3">
                      <input class="form-control" 
                             formControlName="email" 
                             name="email" 
                             id="email" 
                             autocomplete="email"
                             [ngClass]="{'is-invalid': f.submitted && form.get('email')?.invalid}" />
                      <label for="email" class="form-label">Adresse mail</label>
                      <!-- handling errors -->
                      <div *ngIf="form.get('email')?.errors && f.submitted" class="invalid-feedback">
                        <div *ngIf="form.get('email')?.errors?.['required']">
                          Veuillez compléter le champ.
                        </div>
                        <div *ngIf="form.get('email')?.errors?.['email']">
                          L'email n'est pas valide.
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Password -->
                  <div class="col-12">
                    <div class="form-floating mb-3">
                      <input type="password" 
                             class="form-control" 
                             formControlName="password" 
                             id="password"
                             [ngClass]="{'is-invalid': f.submitted && form.get('password')?.invalid }" />
                      <label for="password" class="form-label">Mot de passe</label>
                      <!-- handling errors -->
                      <div *ngIf="form.get('password')?.errors && f.submitted" class="invalid-feedback">
                        <div *ngIf="form.get('password')?.errors?.['required']">
                          Veuillez compléter le champ.
                        </div>
                        <div *ngIf="form.get('password')?.errors?.['minlength']">
                          Minimum 6 caractères.
                        </div>
                      </div>
                    </div>
                  </div>


                  <!-- Phone Number -->
                  <div class="col-12">
                    <div class="form-floating mb-3">
                      <ngx-intl-tel-input [onlyCountries]="countriesList" 
                                          [enableAutoCountrySelect]="true"
                                          [enablePlaceholder]="true" 
                                          [selectFirstCountry]="true" 
                                          [phoneValidation]="true"
                                          [separateDialCode]="true" 
                                          [numberFormat]="PhoneNumberFormat.National" 
                                          name="phone"
                                          formControlName="phone" 
                                          [ngClass]="{'is-invalid': f.submitted && form.get('phone')?.invalid}">
                      </ngx-intl-tel-input>
                      <!-- handling errors -->
                      <div *ngIf="form.get('phone')?.errors && f.submitted" class="invalid-feedback">
                        <div *ngIf="form.get('phone')?.errors?.['required']">
                          Veuillez compléter le champ.
                        </div>
                      </div>
                    </div>
                  </div>



                  <!-- Terms and Conditions -->
                  <div class="col-12">
                    <div class="form-check">
                      <input class="form-check-input" 
                             type="checkbox" 
                             value="" 
                             name="iAgree" 
                             id="iAgree" />
                      <label class="form-check-label text-secondary" for="iAgree">
                        J'accepte les
                        <a href="#!" class="link-custom">termes et conditions</a>
                      </label>
                    </div>
                  </div>

                  <!-- Sign Up Button -->
                  <div class="col-12">
                    <div class="d-grid my-3">
                      <button class="btn btn-custom btn-lg" type="submit">
                        S'inscrire
                      </button>
                    </div>
                  </div>

                  <!-- Errors Handling -->
                  <div class="col-12">
                    <div *ngIf="isSignUpFailed" class="alert alert-danger" role="alert">
                      {{ message }}
                    </div>
                  </div>
                </div>
              </form>

            </div>

            <!-- When user is registered -->
            <div *ngIf="isSuccessful" class="alert alert-success">
              {{ message }} Vous allez être automatiquement redirigé.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>