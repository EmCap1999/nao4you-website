<section class="py-3 py-md-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5 col-xxl-4">
        <div class="card border border-light-subtle rounded-3 shadow-sm">
          <div class="card-body p-3 p-md-4 p-xl-5">
            <div class="text-center mb-3">
              <a href="https://www.facebook.com/profile.php?id=100086769682698">
                <img ngSrc="assets/images/nao4you_logo.jpg" alt="Nao4You" width="175" height="175" priority />
              </a>
            </div>
            <h2 class="fs-6 fw-normal text-center text-secondary mb-4">
              Connectez-vous à votre compte
            </h2>

            <!-- While user is not logged in -->
            <div *ngIf="!isLoggedIn">
              <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
                <div class="row gy-2 overflow-hidden">
                  <!-- email address -->
                  <div class="col-12">
                    <div class="form-floating mb-3">
                      <input type="email" class="form-control" id="email" name="email" [(ngModel)]="form.email" required
                        #email="ngModel" placeholder="name@example.com" autocomplete="email" [ngClass]="{
                          'is-invalid': f.submitted && email.errors,
                        }" />
                      <label for="email" class="form-label">Adresse mail</label>
                      <div *ngIf="email.errors && f.submitted" class="invalid-feedback">
                        Veuillez compléter le champ.
                        <div *ngIf="email.errors['email']">
                          Adresse mail non-valide.
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- password -->
                  <div class="col-12">
                    <div class="form-floating mb-3">
                      <input type="password" class="form-control" id="password" name="password"
                        [(ngModel)]="form.password" required minlength="6" #password="ngModel"
                        placeholder="Mot de passe" [ngClass]="{
                          'is-invalid': f.submitted && password.errors,
                        }" />
                      <label for="password" class="form-label">Mot de passe</label>
                      <div *ngIf="password.errors && f.submitted" class="invalid-feedback">
                        <div *ngIf="password.errors['required']">
                          Veuillez compléter le champ.
                        </div>
                        <div *ngIf="password.errors['minlength']">
                          6 caractères minimum.
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Forgot password -->
                  <div class="col-12 d-flex justify-content-end">
                    <a href="#!" class="link-custom">Mot de passe oublié ?</a>
                  </div>

                  <!-- Connexion button -->
                  <div class="col-12">
                    <div class="d-grid my-3">
                      <button class="btn btn-custom btn-lg" type="submit">
                        Se connecter
                      </button>
                    </div>
                  </div>

                  <!-- Sign up -->
                  <div class="col-12">
                    <p class="m-0 text-secondary text-center">
                      Vous n'avez pas de compte ?
                      <a href="register" class="link-custom">Inscrivez-vous</a>
                    </p>
                  </div>

                  <!-- Errors management -->
                  <div class="col-12">
                    <div *ngIf="f.submitted && isLoginFailed" class="alert alert-danger" role="alert">
                      {{ message }}
                    </div>
                  </div>
                </div>
              </form>
            </div>

            <!-- Log Out -->
            <div *ngIf="isLoggedIn" class="alert alert-success text-center">
              Bienvenu(e) {{ user }}.
              <div class="d-grid mt-3">
                <button (click)="logout()" class="btn btn-custom btn-lg">
                  Se déconnecter
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>